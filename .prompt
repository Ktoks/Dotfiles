#!/usr/bin/env bash

C_SUCCESS="\[\e[38;2;121;161;14m\]\n->"
C_FAIL="\[\e[38;2;219;41;20m\]\nxx"
C_RESET="\[\e[0m\]"

C_PROMPT_BEGIN="\[\e[38;2;120;149;136m\]\u\[\e[38;2;121;116;14m\]@\[\e[38;2;202;141;15m\]\H "

update_prompt_status() {
    local EXIT_CODE=$?
    
    history -a; history -n

    if [ $EXIT_CODE -eq 0 ]; then
        PROMPT_INDICATOR="${C_SUCCESS}${C_RESET}"
    else
        PROMPT_INDICATOR="${C_FAIL}${C_RESET}"
    fi
    PS1="${C_PROMPT_BEGIN}\[\e[38;2;219;41;20m\]\w ${PROMPT_INDICATOR} "
}

PROMPT_COMMAND="update_prompt_status"
